From 278439531b13b0b047dbe3a75aa3f1b3407c8bd4 Mon Sep 17 00:00:00 2001
From: Albert Astals Cid <aacid@kde.org>
Date: Tue, 25 Apr 2017 19:42:15 +0200
Subject: Fix memory leak (and probably logic bug) parsing broken XRef entries

Don't need to get obj1 again to ask if it's an int64 instead of an int

Bug #100775

Index: poppler-0.48.0/poppler/XRef.cc
===================================================================
--- poppler-0.48.0.orig/poppler/XRef.cc	2017-07-06 08:47:34.933027302 -0400
+++ poppler-0.48.0/poppler/XRef.cc	2017-07-06 08:47:34.929027252 -0400
@@ -1598,8 +1598,7 @@ GBool XRef::parseEntry(Goffset offset, X
      str->makeSubStream(offset, gFalse, 20, &obj)), gTrue);
 
   Object obj1, obj2, obj3;
-  if (((parser.getObj(&obj1)->isInt()) ||
-       parser.getObj(&obj1)->isInt64()) &&
+  if (((parser.getObj(&obj1)->isInt()) || obj1.isInt64()) &&
       (parser.getObj(&obj2)->isInt()) &&
       (parser.getObj(&obj3)->isCmd("n") || obj3.isCmd("f"))) {
     if (obj1.isInt64())
