Description: fix NULL pointer dereference in JPXStream::readUByte
Author: Marc Deslauriers <marc.deslauriers@canonical.com>
Forwarded: no, internal JPX handler is unmaintained

Index: poppler-0.48.0/poppler/JPXStream.cc
===================================================================
--- poppler-0.48.0.orig/poppler/JPXStream.cc	2014-02-09 10:10:32.000000000 -0500
+++ poppler-0.48.0/poppler/JPXStream.cc	2017-07-06 08:45:45.839634326 -0400
@@ -971,7 +971,8 @@ GBool JPXStream::readCodestream(Guint le
 	  img.xTileOffset > img.xOffset ||
 	  img.yTileOffset > img.yOffset ||
 	  img.xTileSize + img.xTileOffset <= img.xOffset ||
-	  img.yTileSize + img.yTileOffset <= img.yOffset) {
+	  img.yTileSize + img.yTileOffset <= img.yOffset ||
+	  img.nComps == 0) {
 	error(errSyntaxError, getPos(), "Error in JPX SIZ marker segment");
 	return gFalse;
       }
